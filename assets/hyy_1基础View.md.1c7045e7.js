import{_ as s,c as n,o as a,a as p}from"./app.a7fc1445.js";const C=JSON.parse('{"title":"","description":"","frontmatter":{},"headers":[],"relativePath":"hyy/1\u57FA\u7840View.md"}'),l={name:"hyy/1\u57FA\u7840View.md"},o=p(`<h6 id="_1-\u57FA\u7840\u7684get\u548Cpost" tabindex="-1">1.\u57FA\u7840\u7684get\u548Cpost <a class="header-anchor" href="#_1-\u57FA\u7840\u7684get\u548Cpost" aria-hidden="true">#</a></h6><div class="language-shell script"><button class="copy"></button><span class="lang">shell script</span><pre><code><span class="line"><span style="color:#A6ACCD;">from django.shortcuts import render</span></span>
<span class="line"><span style="color:#A6ACCD;">from django.http import HttpResponse, JsonResponse</span></span>
<span class="line"><span style="color:#A6ACCD;">from django.views import View</span></span>
<span class="line"><span style="color:#A6ACCD;">from .models import City</span></span>
<span class="line"><span style="color:#676E95;"># Create your views here.</span></span>
<span class="line"><span style="color:#A6ACCD;">class IndexView</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">View</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;">:</span></span>
<span class="line"><span style="color:#89DDFF;">    </span><span style="color:#676E95;"># \u57FA\u4E8E\u7C7B\u7684\u89C6\u56FE\uFF0C\u628A\u5171\u540C\u7684\u6570\u636E\u653E\u5230\u7C7B\u5C5E\u6027\u4E0A\u9762</span></span>
<span class="line"><span style="color:#A6ACCD;">    all = </span><span style="color:#82AAFF;">City.objects.all</span><span style="color:#89DDFF;">()</span></span>
<span class="line"><span style="color:#A6ACCD;">    def get</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">self, request</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;">:</span></span>
<span class="line"><span style="color:#A6ACCD;">        print</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">request</span><span style="color:#89DDFF;">)</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#89DDFF;">return</span><span style="color:#A6ACCD;"> JsonResponse</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">{</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">list</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">: </span><span style="color:#82AAFF;">list(self.all.values</span><span style="color:#89DDFF;">()</span><span style="color:#A6ACCD;">)}, json_dumps_params={</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">ensure_ascii</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">: False})</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">    def post</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">self, request</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;">:</span></span>
<span class="line"><span style="color:#A6ACCD;">        print</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">Nice</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">)</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#89DDFF;">return</span><span style="color:#A6ACCD;"> HttpResponse</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">Nice</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">)</span></span>
<span class="line"></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br></div></div><h6 id="_2-urls\u4E2D\u4F20\u9012\u53C2\u6570\u7ED9\u7C7B\u89C6\u56FE" tabindex="-1">2.urls\u4E2D\u4F20\u9012\u53C2\u6570\u7ED9\u7C7B\u89C6\u56FE <a class="header-anchor" href="#_2-urls\u4E2D\u4F20\u9012\u53C2\u6570\u7ED9\u7C7B\u89C6\u56FE" aria-hidden="true">#</a></h6><div class="language-python line-numbers-mode"><button class="copy"></button><span class="lang">python</span><pre><code><span class="line"><span style="color:#676E95;"># url\u4E2D\u4F20\u9012\u53C2\u6570</span></span>
<span class="line"><span style="color:#82AAFF;">path</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&#39;&#39;</span><span style="color:#89DDFF;">,</span><span style="color:#82AAFF;"> views</span><span style="color:#89DDFF;">.</span><span style="color:#F07178;">IndexView</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">as_view</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">rest</span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">...rest</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">),</span><span style="color:#82AAFF;"> </span><span style="color:#A6ACCD;">name</span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">index</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">),</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;"># 2.\u89C6\u56FE\u4E2D\u901A\u8FC7self\u8BBF\u95EE</span></span>
<span class="line"><span style="color:#89DDFF;">from</span><span style="color:#A6ACCD;"> django</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">shortcuts </span><span style="color:#89DDFF;">import</span><span style="color:#A6ACCD;"> render</span></span>
<span class="line"><span style="color:#89DDFF;">from</span><span style="color:#A6ACCD;"> django</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">http </span><span style="color:#89DDFF;">import</span><span style="color:#A6ACCD;"> HttpResponse</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> JsonResponse</span></span>
<span class="line"><span style="color:#89DDFF;">from</span><span style="color:#A6ACCD;"> django</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">views </span><span style="color:#89DDFF;">import</span><span style="color:#A6ACCD;"> View</span></span>
<span class="line"><span style="color:#89DDFF;">from</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">models </span><span style="color:#89DDFF;">import</span><span style="color:#A6ACCD;"> City</span></span>
<span class="line"><span style="color:#676E95;"># Create your views here.</span></span>
<span class="line"><span style="color:#C792EA;">class</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">IndexView</span><span style="color:#89DDFF;">(</span><span style="color:#FFCB6B;">View</span><span style="color:#89DDFF;">):</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#676E95;"># \u57FA\u4E8E\u7C7B\u7684\u89C6\u56FE\uFF0C\u628A\u5171\u540C\u7684\u6570\u636E\u653E\u5230\u7C7B\u5C5E\u6027\u4E0A\u9762</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#82AAFF;">all</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> City</span><span style="color:#89DDFF;">.</span><span style="color:#F07178;">objects</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">all</span><span style="color:#89DDFF;">()</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#676E95;"># </span><span style="color:#89DDFF;">TODO</span><span style="color:#676E95;"> \u5FC5\u987B\u5148\u5B9A\u4E49\u4E00\u4E2Arest\uFF0C\u5426\u5219as_view\u52A0rest\u53C2\u6570\u4F20\u9012\u8FDB\u6765\u7684\u65F6\u5019\u7F16\u8BD1\u4F1A\u62A5\u9519</span></span>
<span class="line"><span style="color:#A6ACCD;">    rest </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;&#39;</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#C792EA;">def</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">get</span><span style="color:#89DDFF;">(</span><span style="color:#F07178;">self</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#A6ACCD;">request</span><span style="color:#89DDFF;">):</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#82AAFF;">print</span><span style="color:#89DDFF;">(</span><span style="color:#82AAFF;">request</span><span style="color:#89DDFF;">)</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#82AAFF;">print</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">self</span><span style="color:#89DDFF;">.</span><span style="color:#F07178;">rest</span><span style="color:#89DDFF;">)</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#89DDFF;">return</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">JsonResponse</span><span style="color:#89DDFF;">({</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">list</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">:</span><span style="color:#82AAFF;"> </span><span style="color:#FFCB6B;">list</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">self</span><span style="color:#89DDFF;">.</span><span style="color:#F07178;">all</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">values</span><span style="color:#89DDFF;">())},</span><span style="color:#82AAFF;"> </span><span style="color:#A6ACCD;">json_dumps_params</span><span style="color:#89DDFF;">={</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">ensure_ascii</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">:</span><span style="color:#82AAFF;"> </span><span style="color:#89DDFF;">False})</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#C792EA;">def</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">post</span><span style="color:#89DDFF;">(</span><span style="color:#F07178;">self</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#A6ACCD;">request</span><span style="color:#89DDFF;">):</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#82AAFF;">print</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">Nice</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">)</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#89DDFF;">return</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">HttpResponse</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">Nice</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">)</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br></div></div>`,4),e=[o];function r(c,t,D,F,y,A){return a(),n("div",null,e)}const b=s(l,[["render",r]]);export{C as __pageData,b as default};
